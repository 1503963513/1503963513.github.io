(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{600:function(s,n,t){s.exports=t.p+"assets/img/thiszx.14015b45.png"},638:function(s,n,t){"use strict";t.r(n);var a=t(15),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("相信很多小伙伴，初学js的时候都会被this弄的焦头烂额。this关键字是一个非常非常重要的点，毫不夸张的说，如果不了解this，基本上所有的开发任务都不能完成。\n"),a("strong",[s._v("首先：你要记住this的重点，这会帮你理解下面的内容")]),s._v(" "),a("strong",[s._v("1、this永远指向一个对象")]),s._v(" "),a("strong",[s._v("2、this对象，通过不同的方式调用函数，this的指向就不同")]),s._v(" "),a("strong",[s._v("核心一句话 - 哪个对象调用函数，函数里面的this指向哪个对象。")])]),s._v(" "),a("p",[s._v("针对第一点，无论在什么地方使用this，this必然指向某个对象；剩下的就剩一个问题，this到底指向哪，在javaScript中，万物皆对象，所有的函数都是在某个对象下运行，而this就是指向函数所运行的对象，这本来很好理解，可是this随着函数的使用场景不同，this的值就会发生变化。这也就是说，this的指向是动态的，很难事先确定好this指向哪个对象，这才上让我们感到困惑的地方。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("function fn(){\n            console.log(this.age)\n            console.log(this)\n        }\n        let obj = {\n            age : 20,\n            f : fn\n        }\n        var age = 10;\n        fn()        //调用fn()this指向window，age为10\n        obj.s()  //通过对象调用fn()，age为20\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("上面，this被调用了两次,结果也是不一样的。\n在全局作用域下调用"),a("code",[s._v("fn()")]),s._v("，"),a("code",[s._v("fn()")]),s._v("指向全局作用域对象"),a("code",[s._v("window")]),s._v("；\n而"),a("code",[s._v("obj.s()")]),s._v("运行在对象内运行，"),a("code",[s._v("this")]),s._v("指向当前对象；")]),s._v(" "),a("p",[a("strong",[s._v("而我们要清除的是this的指向为什么会发生改变，this的指向改变是怎么发生的")]),s._v("\n函数、对象、数组，都是（复合）引用数据类型，引用数据类型在栈内存中实际保存的是对象在堆内存的引用地址，通过这个引用地址可以快速找到保存在堆内存中的对象。\n"),a("strong",[s._v("上方obj有两个属性，但是属性的值类型却是不一样的，所有在内存中储存方式的也不一样。")])]),s._v(" "),a("img",{attrs:{src:t(600)}}),s._v("\n因为函数既可以当做值传递也是一个对象和构造函数。所以函数在运行的时候确定了当前的运行环境，**this是函数体自带的一个对象指针，而this指向调用对象。**所以，this会根据运行环境的改变而改变，同时this也只能在运行时才能确认运行环境。\n###事件绑定的三种方式：行内绑定、动态绑定、事件监听\n####行内绑定分为两种情况\n```\n"),a("button",{attrs:{onclick:"fn(this)"}},[s._v("发送1")]),s._v(" "),a("button",{attrs:{onclick:"fn()"}},[s._v("发送2")]),s._v("\nfunction fn(obj) {\n            console.log(this) // 此函数的运行环境在全局window对象下，因此this指向window;\n            console.log(obj)  //this作为实参传递，this指向当前节点对象\n        }\n```\n####动态绑定和事件监听\n因为动态绑定的事件本就是为**节点对象的属性(事件名称前面加'on')重新赋值为一个匿名函数**，因此函数在执行时就是在节点对象的环境下，this自然就指向了本节点对象；\n##下面是this在各个不同环境下的具体指向\n**一、this指向window**\n（1）this如果单独使用，this 表示全局对象。\n```\nvar x = this\n        document.querySelector('body').innerHTML = x  //[object Window]\n```\n输出结果是  [object Window]；\n"),a("p",[s._v("（2）在函数中，this 表示全局对象")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("function fn(){\n            console.log(this) \n        }\nfn()  //window\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("（3）定时器调用函数，this指向window")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("setInterval(function(){\n            console.log(this)\t//这里this指向window\n        }, 1000)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("（4）行内绑定事件（DOM0级）通过函数名+()形式调用this指向window")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<button onclick="fn()">发送</button>\n    <script>\n        function fn(){\n            console.log(this)\n        }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("二、this指向事件对象")]),s._v("\n（1）在事件中，this 表示事件调用的节点对象。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<button>发送</button>\n    <script>\n        let btn = document.querySelector('button')\n        btn.onclick = function fn(){\n            console.log(this)  \n        }\n    <\/script>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("this指向当前"),a("button",[s._v("发送")]),s._v("\n（2）行内绑定事件时通过函数名+(this)形式,this指向调用的节点对象")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<button onclick="fn(this)">发送</button>\n    <script>\n        function fn(res){\n            console.log(res)\n        }\n    <\/script>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("this指向"),a("button",{attrs:{onclick:"fn(this)"}},[s._v("发送")]),s._v("\n（3）DOM2级事件调用，this指向调用的节点对象")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<button>发送</button>\n    <script>\n        let btn = document.querySelector('button')\n        btn.addEventListener('click',function(){\n            console.log(this)\n        },false)\n    <\/script>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("strong",[s._v("三、this指向对象")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("let obj = {\n            name: '张三',\n            say(){\n               console.log(this) \n            }\n        }\n        obj.say()  //obj\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("this指向对象obj\n"),a("strong",[s._v("四、this指向数组")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("let arr = ['张三','李四','小甜甜',fn]\n\n        function fn(){\n            console.log(this)\n        }\narr[3]() //arr\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("五、构造函数中的this指向")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("function Fn(){\n            this.name = '张三'\n            this.say = function(){\n                console.log(this)\n            }\n        }\n        let res = new Fn();\n        res.say()\n        console.log(res)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("构造函数中的this指向new创建的新对象\n"),a("strong",[s._v("六、箭头函数=>的this指向")]),s._v("\n箭头函数本身上面是没有this，它的this可以去上一层去找，正是因为箭头函数没有this绑定，所有箭头函数不能用于构造函数。\n"),a("strong",[s._v("箭头函数中this指向宿主对象")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<button>发送</button>\n    <script>\n        let btn = document.querySelector('button')\n        btn.onclick = function fn(){\n            setInterval(()=> {\n                console.log(this)\n            }, 1000);\n        }\n    <\/script>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("定时器原本this指向window，使用箭头函数this去上一层，this指向"),a("button",[s._v("发送")])])])}),[],!1,null,null,null);n.default=e.exports}}]);